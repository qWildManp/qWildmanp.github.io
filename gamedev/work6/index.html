<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Langxuan(Harry) He</title>
<meta name=description content="Langxuan He's Portfolio Website"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://qwildmanp.github.io/css/bootstrap.min.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic"><link rel=stylesheet href=https://qwildmanp.github.io/css/font-awesome.min.css><link rel=stylesheet href=https://qwildmanp.github.io/css/owl.carousel.css><link rel=stylesheet href=https://qwildmanp.github.io/css/owl.theme.css><link href=https://qwildmanp.github.io/css/style.red.css rel=stylesheet id=theme-stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link href=https://qwildmanp.github.io/css/custom.css rel=stylesheet><link rel="shortcut icon" href=https://qwildmanp.github.io/img/favicon.png></head><body><div id=all><div class=container-fluid><div class="row row-offcanvas row-offcanvas-left"><div id=sidebar class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas"><div class=sidebar-content><h1 class=sidebar-heading><a href=https://qwildmanp.github.io/>Langxuan(Harry) He</a></h1><p class=sidebar-p>Hi! this is Langxuan He! And you can call me Harry.I'll be gradeted from CMUETC on May 2024 and I'm look for Game Designer/Level Designer Job.I have 3-year experience in Game Design and Level Design. I have background in ComputerScience, so I'm also good at scripting</p><ul class=sidebar-menu><li><a href=https://qwildmanp.github.io/gamedev/>Game Developement</a></li><li><a href=https://qwildmanp.github.io/gamedesign/>Game Design</a></li><li><a href=https://qwildmanp.github.io/technical/>Technical</a></li><li><a href=https://qwildmanp.github.io/about/>About me</a></li><li><a href=https://qwildmanp.github.io/contact/>Get in touch</a></li></ul><p class=social><a href=https://www.instagram.com/qaqwildman/ title class="external instagram" title=Instagram><i class="fa fa-instagram"></i>
</a><a href=mailto:langxuah@andrew.cmu.edu data-animate-hover=pulse class=email title=E-mail><i class="fa fa-envelope"></i>
</a><a href=https://www.linkedin.com/in/langxuan-he-b51b68252/ data-animate-hover=pulse class=external title=LinkedIn><i class="fa fa-linkedin"></i>
</a><a href=https://github.com/qWildManp data-animate-hover=pulse class=external title=GitHub><i class="fa fa-github"></i>
</a><a href=https://www.youtube.com/channel/UC2ZSDzFStBDZLa7NXkJ2bEg data-animate-hover=pulse class=external title=YouTube><i class="fa fa-youtube"></i></a></p><div class=copyright><p class=credit>&copy;2022 Langxuan He(Harry) |
Template by <a href=https://bootstrapious.com/free-templates class=external>Bootstrapious.com</a>
& ported to Hugo by <a href=https://github.com/kishaningithub>Kishan B</a></p></div></div></div><div class="col-xs-12 col-sm-8 col-md-9 content-column white-background"><div class="small-navbar visible-xs"><button type=button data-toggle=offcanvas class="btn btn-ghost pull-left"> <i class="fa fa-align-left"></i>Menu</button><h1 class=small-navbar-heading><a href=https://qwildmanp.github.io/>Langxuan(Harry) He</a></h1></div><div class=row><div class=col-lg-8><div class=content-column-content><h1>Unreal VR Project : Lost in the Light</h1><p><strong>Introduction</strong>: It is a 3-month coop project between ETC and Game For Change 2023. Create a transformational XR experience for the Games for Change festival held in New York City.</p><p>Team members:
Langxuan (Harry) He, Anlan Yang, Jessica Cromp, Jiaxin Li,Kailai Feng(Kai),Weixin Feng(Targy)</p><p>I am a gameplay programmer and a level designer in this project</p><link rel=stylesheet href=/css/hugo-easy-gallery.css><div class=box style=max-width:70%><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=/img/portfolio/Work6/title_img.jpg></div><a href=/img/portfolio/Work6/title_img.jpg itemprop=contentUrl></a></figure></div><p>Finish Date: May 2023</p><h2 id=video-demo>Video Demo</h2><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/Ptwg27AP-E8?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><h2 id=game-overview>Game Overview</h2><p>It&rsquo;s a flying simulation experience. Player will act as a songbird who is on a migration path starting from south to north. Because of the light pollution, player need to avoid those harmful light to not get disoriented in the game</p><p><strong>Keywords: Flying Simulation, Story Telling</strong></p><h2 id=automatic-flying-system-using-bezier-curve>Automatic flying system using Bezier Curve</h2><h3 id=basic-approach>Basic Approach</h3><p>This project requires player to have a certain moving path throughout the experience, to simulate the reality bird migration path, I think using Bezier Curve to simulate the path is a good choice. I use the fomular of 5-point bezier curve to create the curve, because more control points can make curve more variant.</p><div class=box style=max-width:70%><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=/img/portfolio/Work6/bazier_curve.jpg></div><a href=/img/portfolio/Work6/bazier_curve.jpg itemprop=contentUrl></a></figure></div><p>Compute a cureve based on control points<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>FVector AComputerBezier::ComputeBezierCurvePoint<span style=color:#f92672>(</span>TArray&lt;FVector&gt; pt_set,float t_value<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	FVector P0 <span style=color:#f92672>=</span> pt_set<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>	FVector P1 <span style=color:#f92672>=</span> pt_set<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>	FVector P2 <span style=color:#f92672>=</span> pt_set<span style=color:#f92672>[</span>2<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>	FVector P3 <span style=color:#f92672>=</span> pt_set<span style=color:#f92672>[</span>3<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>	FVector P4 <span style=color:#f92672>=</span> pt_set<span style=color:#f92672>[</span>4<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>  pow<span style=color:#f92672>(</span><span style=color:#ae81ff>1</span> - t_value, 4<span style=color:#f92672>)</span> * P0 
</span></span><span style=display:flex><span>		+ <span style=color:#ae81ff>4</span> * pow<span style=color:#f92672>(</span><span style=color:#ae81ff>1</span> - t_value, 3<span style=color:#f92672>)</span> * t_value * P1 
</span></span><span style=display:flex><span>		+ <span style=color:#ae81ff>6</span> * pow<span style=color:#f92672>(</span><span style=color:#ae81ff>1</span> - t_value, 2<span style=color:#f92672>)</span> * pow<span style=color:#f92672>(</span>t_value, 2<span style=color:#f92672>)</span> * P2 
</span></span><span style=display:flex><span>		+ <span style=color:#ae81ff>4</span> * <span style=color:#f92672>(</span><span style=color:#ae81ff>1</span> - t_value<span style=color:#f92672>)</span> * pow<span style=color:#f92672>(</span>t_value, 3<span style=color:#f92672>)</span> * P3 
</span></span><span style=display:flex><span>		+ pow<span style=color:#f92672>(</span>t_value, 4<span style=color:#f92672>)</span> * P4;
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></td></tr></table></div></div></p><p>Given a set of control points compute full flying path<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>void AComputerBezier::Tick<span style=color:#f92672>(</span>float DeltaTime<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	Super::Tick<span style=color:#f92672>(</span>DeltaTime<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>controlPts.IsEmpty<span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>	int ptStartIdx <span style=color:#f92672>=</span> ptSet_idx * 4;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	int numOfControlPts <span style=color:#f92672>=</span> GetNumOfControlPtsRemain<span style=color:#f92672>(</span>ptStartIdx<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>	//get num of control points in front
</span></span><span style=display:flex><span>	//there are enough number of control points and it is valid to insert new control point, so insert new set of control point
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>numOfControlPts &gt;<span style=color:#f92672>=</span> 5<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		computeSet.Empty<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>int j <span style=color:#f92672>=</span> ptStartIdx; j &lt; ptStartIdx + 5;j++<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>				computeSet.Add<span style=color:#f92672>(</span>controlPts<span style=color:#f92672>[</span>j<span style=color:#f92672>]</span>-&gt;GetActorLocation<span style=color:#f92672>())</span>;
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>numOfControlPts &lt; 5<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>// it means there is not enough control point in front, so just stop 
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>!for_test<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>			reach_end_set <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			ptSet_idx <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>!reach_end_set<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>// <span style=color:#66d9ef>if</span> current is not the end set keep calculate Bezier Curve point
</span></span><span style=display:flex><span>		ComputeBezierCurvePoint<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>t &gt;<span style=color:#f92672>=</span> 1<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		t <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>		ptSet_idx <span style=color:#f92672>+=</span> 1;
</span></span><span style=display:flex><span>		can_insert_new_pts <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></td></tr></table></div></div></p><h3 id=resolve-the-sharp-turnning-point-between-two-curve>Resolve the sharp turnning point between two curve</h3><p>During the development , we found the if the gradient of the end of first curve and start of second curve is different, it will cause the &ldquo;sharp turnning point&rdquo;(shown as below), which will let player feel a sudden pause / turn at these edge points .To solve the sharp turning point issue, I try with a method to smooth it.<div class=box style=max-width:70%><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=/img/portfolio/Work6/sharp_turnning_point.jpg alt="Sharp turning point between two single curves"></div><a href=/img/portfolio/Work6/sharp_turnning_point.jpg itemprop=contentUrl></a><figcaption><p>Sharp turning point between two single curves</p></figcaption></figure></div></p><p>My approach is create a smoothing curve which will sampling five new control points from for example curve C1 and curve C2. They are p2&rsquo; , p3 , p4 , p5 and p6&rsquo;. The new points can create a &ldquo;smoothing curve&rdquo; (The purple curve).</p><div class=box style=max-width:70%><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=/img/portfolio/Work6/smoothing_curve.jpg alt="Smoothing curve"></div><a href=/img/portfolio/Work6/smoothing_curve.jpg itemprop=contentUrl></a><figcaption><p>Smoothing curve</p></figcaption></figure></div><p>Then a blending attribute alpha is introduced to do the smoothing using follwing fomula :<div class=box style=max-width:70%><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=/img/portfolio/Work6/smooth_fomula.jpg></div><a href=/img/portfolio/Work6/smooth_fomula.jpg itemprop=contentUrl></a></figure></div></p><p>, Then we can smoothly blend two single Bezier Curves.</p><div class=box style=max-width:70%><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=/img/portfolio/Work6/final_curve.jpg></div><a href=/img/portfolio/Work6/final_curve.jpg itemprop=contentUrl></a></figure></div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>void AComputerBezier::SmoothingCurvePoint<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>smoothingSet.IsEmpty<span style=color:#f92672>())</span> <span style=color:#f92672>{</span>// <span style=color:#66d9ef>if</span> need to add new smoothing set
</span></span><span style=display:flex><span>		float nextSetIdx <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ptSet_idx + 1<span style=color:#f92672>)</span> * 4;//start idx of next set
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>GetNumOfControlPtsRemain<span style=color:#f92672>(</span>nextSetIdx<span style=color:#f92672>)</span>&lt;5<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>//there are no enough
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>int j <span style=color:#f92672>=</span> nextSetIdx; j &lt; nextSetIdx + 5;j++<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>				nextComputeSet.Add<span style=color:#f92672>(</span>controlPts<span style=color:#f92672>[</span>j<span style=color:#f92672>]</span>-&gt;GetActorLocation<span style=color:#f92672>())</span>;
</span></span><span style=display:flex><span>			<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>			smoothingSet.Add<span style=color:#f92672>(</span>ComputeBezierCurvePoint<span style=color:#f92672>(</span>computeSet, 0.5<span style=color:#f92672>))</span>;
</span></span><span style=display:flex><span>			smoothingSet.Add<span style=color:#f92672>(</span>computeSet<span style=color:#f92672>[</span>3<span style=color:#f92672>])</span>;
</span></span><span style=display:flex><span>			smoothingSet.Add<span style=color:#f92672>(</span>computeSet<span style=color:#f92672>[</span>4<span style=color:#f92672>])</span>;
</span></span><span style=display:flex><span>			smoothingSet.Add<span style=color:#f92672>(</span>nextComputeSet<span style=color:#f92672>[</span>1<span style=color:#f92672>])</span>;
</span></span><span style=display:flex><span>			smoothingSet.Add<span style=color:#f92672>(</span>ComputeBezierCurvePoint<span style=color:#f92672>(</span>nextComputeSet, 0.5<span style=color:#f92672>))</span>;
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	// compute curve point on smoothing set
</span></span><span style=display:flex><span>	FVector intersetCurvePt <span style=color:#f92672>=</span> ComputeBezierCurvePoint<span style=color:#f92672>(</span>smoothingSet, t_interset<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	//blend smoothing curve and current curve with smooth alpha
</span></span><span style=display:flex><span>	FVector newcurvePt <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#ae81ff>1</span> - smooth_alpha<span style=color:#f92672>)</span> * curvePt + smooth_alpha * intersetCurvePt;
</span></span><span style=display:flex><span>	curvePt <span style=color:#f92672>=</span> newcurvePt;
</span></span><span style=display:flex><span>	//updating smoothing alpha
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>!freez_alpha<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		t_interset <span style=color:#f92672>+=</span> t_step * GetWorld<span style=color:#f92672>()</span>-&gt;GetDeltaSeconds<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>		smooth_alpha <span style=color:#f92672>+=</span> alpha_step * GetWorld<span style=color:#f92672>()</span>-&gt;GetDeltaSeconds<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>smooth_alpha &gt; 0.9<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		smooth_alpha <span style=color:#f92672>=</span> 0.9;
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>t &gt;<span style=color:#f92672>=</span> 1<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>			alpha_step <span style=color:#f92672>=</span> -alpha_step;
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>smooth_alpha &lt; 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		smooth_alpha <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		alpha_step <span style=color:#f92672>=</span> -alpha_step;
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	// <span style=color:#66d9ef>if</span> t_interset reach the end , its time change to another smoothing set of points
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>t_interset &gt;<span style=color:#f92672>=</span> 1<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		t_interset <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>		smoothingSet.Empty<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>		nextComputeSet.Empty<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>	  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span></span></span></code></pre></td></tr></table></div></div></div></div></div></div></div></div></div><script src=https://qwildmanp.github.io/js/jquery.min.js></script><script src=https://qwildmanp.github.io/js/bootstrap.min.js></script><script src=https://qwildmanp.github.io/js/jquery.cookie.js></script><script src=https://qwildmanp.github.io/js/ekko-lightbox.js></script><script src=https://qwildmanp.github.io/js/jquery.scrollTo.min.js></script><script src=https://qwildmanp.github.io/js/masonry.pkgd.min.js></script><script src=https://qwildmanp.github.io/js/imagesloaded.pkgd.min.js></script><script src=https://qwildmanp.github.io/js/owl.carousel.min.js></script><script src=https://qwildmanp.github.io/js/front.js></script></body></html>